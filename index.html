<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>AI Tester</title>
    <link rel="stylesheet" href="styles/base.css">
    <link rel="stylesheet" href="styles/input-output.css">
    <link rel="stylesheet" href="styles/multimodal-responsive.css">
    <link rel="stylesheet" href="styles/tabs.css">
    <link rel="icon" href="assets/icons.svg">
</head>
<body>
    <!-- æ–°å¢å¯¼èˆªæ  -->
    <nav class="ai-nav">
		    <button class="nav-btn active" data-tab="home">ğŸ  Home</button>
		    <button class="nav-btn" data-tab="postcard">ğŸ’Œ Postcard</button>
		</nav>

    <div class="container">
        <!-- Homeæ ‡ç­¾å†…å®¹ -->
        <div id="home-tab" class="tab-content active">
            <!-- æ ‡é¢˜åŒº -->
            <h1 class="main-title">AI Tester</h1>

            <!-- æ§åˆ¶æ  -->
            <div class="control-bar">
                <div class="control-group">
                    <label class="control-label">AI</label>
                    <select id="ai-model" class="model-select">
                        <option value="gpt">GPT-4</option>
                        <option value="deepseek">DeepSeek</option>
                        <option value="claude">Claude</option>
                        <option value="ark">ARK</option>
                        <option value="dalle">DALL-E</option>
                    </select>
                </div>

                <div class="control-group">
                    <label class="control-label">ç±»ç›®</label>
                    <select id="test-type" class="test-select">
                        <option value="logic">é€»è¾‘æµ‹è¯•</option>
                        <option value="creative">åˆ›æ„æµ‹è¯•</option>
                        <option value="multimodal">å¤šæ¨¡æ€æµ‹è¯•</option>
                    </select>
                </div>

                <button id="run-btn" class="run-button">
                    <span class="btn-text">å¼€å§‹</span>
                    <div class="loader hidden"></div>
                </button>
            </div>

            <!-- è¾“å…¥åŒº -->
            <div class="input-section">
                <div class="input-wrapper">
                    <textarea id="user-input" placeholder="è¾“å…¥æ–‡å­—æˆ–è¯­éŸ³å½•å…¥..."></textarea>
                    <div class="voice-controls">
                        <button id="voice-btn" class="voice-btn">
                            <svg class="icon mic-icon">
                                <use href="assets/icons.svg#mic-icon"></use>
                            </svg>
                            <svg class="icon check-icon" style="display: none;">
                                <use href="assets/icons.svg#check-icon"></use>
                            </svg>
                        </button>
                        <div class="recording-indicator">
                            <div class="pulse"></div>
                            <span id="timer">00:00</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å¤šåª’ä½“å·¥å…·æ  -->
            <div class="multimodal-toolbar hidden" id="multimodal-toolbar">
                <button class="add-button" id="add-media">+</button>
                <div class="media-preview" id="media-preview"></div>
            </div>

            <div class="media-menu hidden" id="media-menu">
                <button class="media-option" data-type="audio">ğŸ¤ è¯­éŸ³è¾“å…¥</button>
                <button class="media-option" data-type="image">ğŸ–¼ï¸ å›¾ç‰‡ä¸Šä¼ </button>
                <button class="media-option" data-type="file">ğŸ“ æ–‡ä»¶é™„ä»¶</button>
            </div>

            <!-- éšè—çš„æ–‡ä»¶è¾“å…¥ -->
            <input type="file" id="image-upload" accept="image/*" hidden>
            <input type="file" id="file-upload" hidden>

            <!-- è¾“å‡ºåŒº -->
            <div class="output-container">
                <div id="output-area" class="output-content"></div>
                <button id="copy-btn" class="copy-btn">
                    <svg class="icon copy-icon">
                        <use href="assets/icons.svg#copy-icon"></use>
                    </svg>
                </button>
            </div>

            <!-- çŠ¶æ€æŒ‡ç¤ºå™¨ -->
            <div id="status-indicator" class="status-hidden">
                <div class="hourglass"></div>
                <span>AIæ­£åœ¨æ€è€ƒ...</span>
            </div>
        </div>

        <div id="postcard-tab" class="tab-content" 
				     data-agent="agents/postcard/postcard.html">
				    <!-- å†…å®¹é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
				</div>
    </div>

    <!-- åŸæœ‰è„šæœ¬å¼•ç”¨ä¿æŒä¸åŠ¨ -->
    <script src="config.js"></script>
    <script src="utils/apiHelper.js"></script>
    <script src="utils/multimodal.js"></script>
    <script src="utils/voiceInput.js"></script>
    <script src="utils/uiControls.js"></script>
    <script src="apis/apiCore.js"></script>
    <script src="apis/gpt.js"></script>
    <script src="apis/deepseek.js"></script>
    <script src="apis/ark.js"></script>
    <script src="apis/dalle.js"></script>
    <script src="apis/claude.js"></script>
    <script src="tests/logicTest.js"></script>
    <script src="tests/creativeTest.js"></script>
    <script src="tests/multimodalTest.js"></script>

    <!-- æ–°å¢è·¯ç”±é€»è¾‘ -->
    <script>
    // æ ‡ç­¾åˆ‡æ¢åŠŸèƒ½
    document.querySelectorAll('.nav-btn').forEach(btn => {
        btn.addEventListener('click', async function() {
            // ç§»é™¤æ‰€æœ‰æ¿€æ´»çŠ¶æ€
            document.querySelectorAll('.nav-btn, .tab-content').forEach(el => {
                el.classList.remove('active');
            });
            
            // è®¾ç½®å½“å‰æ¿€æ´»çŠ¶æ€
            this.classList.add('active');
            const targetTab = document.getElementById(`${this.dataset.tab}-tab`);
            targetTab.classList.add('active');

            // åŠ¨æ€åŠ è½½æ™ºèƒ½ä½“ï¼ˆä»…é¦–æ¬¡åŠ è½½ï¼‰
            if(this.dataset.tab !== 'home' && !targetTab.dataset.loaded) {
                try {
                    // åŠ è½½HTMLå†…å®¹
                    const response = await fetch(targetTab.dataset.agent);
                    targetTab.innerHTML = await response.text();
                    
                    // åŠ è½½CSS
                    const cssPath = targetTab.dataset.agent.replace('.html', '.css');
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = cssPath;
                    document.head.appendChild(link);

                    // åŠ è½½JS
                    const jsPath = targetTab.dataset.agent.replace('.html', '.js');
                    const script = document.createElement('script');
                    script.src = jsPath;
                    document.body.appendChild(script);

                    targetTab.dataset.loaded = true;
                } catch (error) {
                    console.error('åŠ è½½æ™ºèƒ½ä½“å¤±è´¥:', error);
                }
            }
        });
    });
    </script>

    <!-- åŸæœ‰åº”ç”¨ç¨‹åºé€»è¾‘ -->
    <script src="app.js"></script>
</body>
</html>